# Pre-commit configuration for automatic Go code formatting and mockery
# See https://pre-commit.com for more information
# See https://pre-commit.com/hooks.html for more hooks
repos:
  # Official golangci-lint hook from golangci-lint repository
  - repo: https://github.com/golangci/golangci-lint
    rev: v2.4.0
    hooks:
      - id: golangci-lint
        args: [--new-from-rev, HEAD, --fix]
        env:
          GOTOOLCHAIN: local

  # Local hooks for repository-specific tools
  - repo: local
    hooks:
    - id: mockery
      name: Generate mocks with mockery
      entry: scripts/ensure-mockery.sh
      language: system
      files: '\.go$'
      pass_filenames: false
    