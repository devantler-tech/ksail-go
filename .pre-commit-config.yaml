# Pre-commit configuration for automatic Go code formatting and mockery
# See https://pre-commit.com for more information
# See https://pre-commit.com/hooks.html for more hooks

repos:
  - repo: https://github.com/golangci/golangci-lint
    rev: v2.6.1
    hooks:
      - id: golangci-lint-fmt
  - repo: local
    hooks:
      - id: mockery
        name: Generate mocks with mockery
        entry: .github/scripts/run-mockery.sh
        language: script
        files: '\.go$'
        pass_filenames: false
      - id: generate-schema
        name: Generate JSON schema for KSail config
        entry: .github/scripts/generate-schema.sh
        language: script
        files: 'pkg/apis/cluster/v1alpha1/.*\.go$'
        pass_filenames: false
